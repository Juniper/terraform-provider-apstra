---
page_title: "apstra_datacenter_routing_zone_loopback_addresses Resource - terraform-provider-apstra"
subcategory: "Reference Design: Datacenter"
description: |-
  This resource configures loopback interface addresses of switch nodes in a Datacenter Blueprint.
  Note that the loopback interface addresses within the default routing zone can also be configured using the apstra_datacenter_device_allocation resource. Configuring loopback interface addresses using both resources can lead to configuration churn, and should be avoided.
  Note that loopback interface addresses can only be configured on switches actively participating in the given Routing Zone. Leaf Switch participation in non-default Routing Zone requires one of these:
  A Virtual Network in the Routing Zone is bound to the switchA Connectivity Template with an IP Link primitive or routing information for the Routing Zones is assigned to the switchThe switch is acting as a DCI gateway for the Routing Zone.
  The Terraform project must be structured to ensure Routing Zone participation by switches mentioned in this resource before the resource is created or updated.
  Requires Apstra >=5.0.0.
---

# apstra_datacenter_routing_zone_loopback_addresses (Resource)

This resource configures loopback interface addresses of *switch* nodes in a Datacenter Blueprint.

Note that the loopback interface addresses within the `default` routing zone can also be configured using the `apstra_datacenter_device_allocation` resource. Configuring loopback interface addresses using both resources can lead to configuration churn, and should be avoided.

Note that loopback interface addresses can only be configured on switches *actively participating* in the given Routing Zone. Leaf Switch participation in non-default Routing Zone requires one of these:

 - A Virtual Network in the Routing Zone is bound to the switch
 - A Connectivity Template with an IP Link primitive or routing information for the Routing Zones is assigned to the switch
 - The switch is acting as a DCI gateway for the Routing Zone.

The Terraform project must be structured to ensure Routing Zone participation by switches mentioned in this resource before the resource is created or updated.

Requires Apstra >=5.0.0.


## Example Usage

```terraform
# This example sets the IPv4 and IPv6 loopback addresses for two leaf switches
# in the prescribed blueprint and routing zone.
#
# Note that in this case, the map keys are references, so they must be
# wrapped in parentheses.
resource "apstra_datacenter_routing_zone_loopback_addresses" "example" {
  blueprint_id    = local.blueprint_id
  routing_zone_id = local.routing_zone_id
  loopbacks = {
    (local.leaf_1_id) = {
      ipv4_addr = "192.0.2.1/32"
      ipv6_addr = "3fff::1/128"
    }
    (local.leaf_2_id) = {
      ipv4_addr = "192.0.2.2/32"
      ipv6_addr = "3fff::2/128"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `blueprint_id` (String) Apstra Blueprint ID.
- `loopbacks` (Attributes Map) Map of Loopback IPv4 and IPv6 addresses, keyed by System (switch) Node ID. (see [below for nested schema](#nestedatt--loopbacks))
- `routing_zone_id` (String) Routing Zone ID.

<a id="nestedatt--loopbacks"></a>
### Nested Schema for `loopbacks`

Optional:

- `ipv4_addr` (String) The IPv4 address to be assigned within the Routing Zone, in CIDR notation.
- `ipv6_addr` (String) The IPv6 address to be assigned within the Routing Zone, in CIDR notation.



