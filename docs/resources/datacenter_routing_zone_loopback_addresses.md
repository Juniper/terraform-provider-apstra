---
page_title: "apstra_datacenter_routing_zone_loopback_addresses Resource - terraform-provider-apstra"
subcategory: "Reference Design: Datacenter"
description: |-
  This resource configures loopback addresses of switch nodes in a Datacenter Blueprint.
  Note that the loopback addresses within the default routing zone can also be configured using the apstra_datacenter_device_allocation resource. Configuring interfaces using both resources can lead to configuration churn.
  Note that loopback addresses can only be configured on Systems actively participating in the Given Routing Zone. For leaf switches, this means a Virtual Network belonging to the Routing Zone is bound to the Leaf Switch. The Terraform project must be structured carefully to ensure that those bindings exist before this resource is created or updated.
  Requires Apstra >=5.0.0.
---

# apstra_datacenter_routing_zone_loopback_addresses (Resource)

This resource configures loopback addresses of *switch* nodes in a Datacenter Blueprint.

Note that the loopback addresses within the `default` routing zone can also be configured using the `apstra_datacenter_device_allocation` resource. Configuring interfaces using both resources can lead to configuration churn.

Note that loopback addresses can only be configured on Systems *actively participating* in the Given Routing Zone. For leaf switches, this means a Virtual Network belonging to the Routing Zone is bound to the Leaf Switch. The Terraform project must be structured carefully to ensure that those bindings exist before this resource is created or updated.

Requires Apstra >=5.0.0.


## Example Usage

```terraform
# This example sets the IPv4 and IPv6 loopback addresses for two leaf switches
# in the prescribed blueprint and routing zone.
#
# Note that in this case, the map keys are references, so they must be
# wrapped in parentheses.
resource "apstra_datacenter_routing_zone_loopback_addresses" "example" {
  blueprint_id    = local.blueprint_id
  routing_zone_id = local.routing_zone_id
  loopbacks = {
    (local.leaf_1_id) = {
      ipv4_addr = "192.0.2.1/32"
      ipv6_addr = "3fff::1/128"
    }
    (local.leaf_2_id) = {
      ipv4_addr = "192.0.2.2/32"
      ipv6_addr = "3fff::2/128"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `blueprint_id` (String) Apstra Blueprint ID.
- `loopbacks` (Attributes Map) Map of Loopback IPv4 and IPv6 addresses, keyed by System Node ID. (see [below for nested schema](#nestedatt--loopbacks))
- `routing_zone_id` (String) Routing Zone ID.

<a id="nestedatt--loopbacks"></a>
### Nested Schema for `loopbacks`

Optional:

- `ipv4_addr` (String) The IPv4 address to be assigned within the Routing Zone, in CIDR notation.
- `ipv6_addr` (String) The IPv6 address to be assigned within the Routing Zone, in CIDR notation.



