---
page_title: "apstra_datacenter_connectivity_template_interface Resource - terraform-provider-apstra"
subcategory: "Reference Design: Datacenter"
description: |-
  This resource creates a Connectivity Template suitable for use with Application Points of type interface within a Datacenter Blueprint. interface Application Points use the following Connectivity Template Primitive hierarchy:
  Virtual Network (Single)
  Static RouteBGP Peering (Generic System)
  Routing PolicyVirtual Network (Multiple)IP Link
  BGP Peering (Generic System)
  Routing PolicyBGP Peering (IP Endpoint)
  Routing PolicyDynamic BGP Peering
  Routing PolicyStatic RouteRouting Zone Constraint
---

# apstra_datacenter_connectivity_template_interface (Resource)

This resource creates a Connectivity Template suitable for use with Application Points of type *interface* within a Datacenter Blueprint. *interface* Application Points use the following Connectivity Template Primitive hierarchy:
 - Virtual Network (Single)
   - Static Route
   - BGP Peering (Generic System)
     - Routing Policy
 - Virtual Network (Multiple)
 - IP Link
   - BGP Peering (Generic System)
     - Routing Policy
   - BGP Peering (IP Endpoint)
     - Routing Policy
   - Dynamic BGP Peering
     - Routing Policy
   - Static Route
 - Routing Zone Constraint


## Example Usage

```terraform
# The following example creates a Connectivity Template compatible with
# "interface" application points.
#
# It includes "Virtual Network (Multiple)" primitives which each represent
# a different Routing Zone and include all Virtual Networks from that
# Routing Zone.

locals { blueprint_id = "82a4dde9-eb98-4666-a010-d82f66296be4" }

# First, find the IDs of the interesting routing zones using the
# apstra_datacenter_routing_zones data source with a couple of filters:
data "apstra_datacenter_routing_zones" "selected" {
  blueprint_id = local.blueprint_id
  filters = [
    {
      name = "dev"
    },
    {
      name = "test"
    },
  ]
}

# Next, look up the details of each Routing Zone so that we have all of
# its details available in a map.
data "apstra_datacenter_routing_zone" "selected" {
  for_each     = data.apstra_datacenter_routing_zones.selected.ids
  blueprint_id = local.blueprint_id
  id           = each.value
}

# Loop over the Routing Zones. For each RZ, discover the IDs of all
# associated Virtual Networks.
data "apstra_datacenter_virtual_networks" "selected" {
  for_each     = data.apstra_datacenter_routing_zone.selected
  blueprint_id = local.blueprint_id
  filters = [
    {
      routing_zone_id = each.value.id
    }
  ]
}

# Finally, create an 'interface' type Connectivity Template with a
# "Virtual Network (Multiple)" primitive for each Routing Zone. Each
# of these primitives lists all of the Virtual Networks in
# that Routing Zone.
resource "apstra_datacenter_connectivity_template_interface" "example" {
  blueprint_id = local.blueprint_id
  name         = "Tagged handoff to all VNs from multiple RZs"
  description  = format("All VNs from the following RZs: \n - %s", join("\n - ", [for rz in data.apstra_datacenter_routing_zone.selected : rz.name]))
  virtual_network_multiples = {
    for rz in data.apstra_datacenter_routing_zone.selected : format("rz '%s' networks", rz.name) => {
      name          = format("rz '%s' networks", rz.name)
      tagged_vn_ids = data.apstra_datacenter_virtual_networks.selected[rz.id].ids
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `blueprint_id` (String) Blueprint ID.
- `name` (String) Connectivity Template Name displayed in the web UI

### Optional

- `description` (String) Connectivity Template Description displayed in the web UI
- `ip_links` (Attributes Map) Map of *IP Link* Primitives in this Connectivity Template (see [below for nested schema](#nestedatt--ip_links))
- `routing_zone_constraints` (Attributes Map) Map of *Routing Zone Constraint* Primitives in this Connectivity Template (see [below for nested schema](#nestedatt--routing_zone_constraints))
- `tags` (Set of String) Set of Tags associated with this Connectivity Template
- `virtual_network_multiples` (Attributes Map) Map of *Virtual Network (Multiple)* Primitives in this Connectivity Template (see [below for nested schema](#nestedatt--virtual_network_multiples))
- `virtual_network_singles` (Attributes Map) Map of *Virtual Network (Single)* Primitives in this Connectivity Template (see [below for nested schema](#nestedatt--virtual_network_singles))

### Read-Only

- `id` (String) Apstra graph node ID.

<a id="nestedatt--ip_links"></a>
### Nested Schema for `ip_links`

Required:

- `ipv4_addressing_type` (String) One of `none`, `numbered`
- `ipv6_addressing_type` (String) One of `none`, `link_local`, `numbered`
- `routing_zone_id` (String) Node ID of the Routing Zone to which this IP Link should belong.

Optional:

- `bgp_peering_generic_systems` (Attributes Map) Map of BGP Peering (Generic System) primitives (see [below for nested schema](#nestedatt--ip_links--bgp_peering_generic_systems))
- `bgp_peering_ip_endpoints` (Attributes Map) Map of *BGP Peering (IP Endpoint)* Primitives in this Connectivity Template (see [below for nested schema](#nestedatt--ip_links--bgp_peering_ip_endpoints))
- `dynamic_bgp_peerings` (Attributes Map) Map of *Dynamic BGP Peering* Primitives in this Connectivity Template (see [below for nested schema](#nestedatt--ip_links--dynamic_bgp_peerings))
- `l3_mtu` (Number) L3 MTU for sub-interfaces on leaf (spine/superspine) side and generic side. Configuration is applicable only when Fabric MTU is enabled. Value must be even number rom 1280 to 9216, if not specified - Default IP Links to Generic Systems MTU from Virtual Network Policy s used
- `static_routes` (Attributes Map) Map of network IPv4 or IPv6 destination prefixes reachable via this IP Link (see [below for nested schema](#nestedatt--ip_links--static_routes))
- `vlan_id` (Number) 802.1Q tag number to use for tagged IP Link. Omit for untagged IP Link.

Read-Only:

- `batch_id` (String) Unique identifier for this CT Primitive Element's downstream collection
- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline

<a id="nestedatt--ip_links--bgp_peering_generic_systems"></a>
### Nested Schema for `ip_links.bgp_peering_generic_systems`

Required:

- `bfd_enabled` (Boolean) Enable BFD.
- `ipv4_addressing_type` (String) Must be one of: 
  - none
  - addressed
- `ipv6_addressing_type` (String) Must be one of: 
  - none
  - addressed
  - link_local
- `neighbor_asn_dynamic` (Boolean) When `true`, the BGP process will accept connections from any peer AS.
- `peer_from_loopback` (Boolean) Enable to peer from loopback interface. Default behavior peers from physical interface.
- `peer_to` (String) Must be one of: 
  - interface_or_ip_endpoint
  - interface_or_shared_ip_endpoint
  - loopback

Optional:

- `hold_time` (Number) BGP hold time (seconds).
- `keepalive_time` (Number) BGP keepalive time (seconds).
- `local_asn` (Number) This feature is configured on a per-peer basis. It allows a router to appear to be a member of a second autonomous system (AS) by prepending a local-as AS number, in addition to its real AS number, announced to its eBGP peer, resulting in an AS path length of two.
- `password` (String) Password used to secure the BGP session.
- `routing_policies` (Attributes Map) Map of Routing Policy Primitives to be used with this *Protocol Endpoint*. (see [below for nested schema](#nestedatt--ip_links--bgp_peering_generic_systems--routing_policies))
- `ttl` (Number) BGP Time To Live. Omit to use device defaults.

Read-Only:

- `batch_id` (String) Unique identifier for this CT Primitive Element's downstream collection
- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline

<a id="nestedatt--ip_links--bgp_peering_generic_systems--routing_policies"></a>
### Nested Schema for `ip_links.bgp_peering_generic_systems.routing_policies`

Required:

- `routing_policy_id` (String) Routing Policy ID to be applied

Read-Only:

- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline



<a id="nestedatt--ip_links--bgp_peering_ip_endpoints"></a>
### Nested Schema for `ip_links.bgp_peering_ip_endpoints`

Required:

- `bfd_enabled` (Boolean) Enable BFD.

Optional:

- `hold_time` (Number) BGP hold time (seconds).
- `ipv4_address` (String) IPv4 address of peer.
- `ipv6_address` (String) IPv6 address of peer.
- `keepalive_time` (Number) BGP keepalive time (seconds).
- `local_asn` (Number) This feature is configured on a per-peer basis. It allows a router to appear to be a member of a second autonomous system (AS) by prepending a local-as AS number, in addition to its real AS number, announced to its eBGP peer, resulting in an AS path length of two.
- `neighbor_asn` (Number) Neighbor ASN. Omit for *Neighbor ASN Type Dynamic*.
- `password` (String) Password used to secure the BGP session.
- `routing_policies` (Attributes Map) Map of Routing Policy Primitives to be used with this *Protocol Endpoint*. (see [below for nested schema](#nestedatt--ip_links--bgp_peering_ip_endpoints--routing_policies))
- `ttl` (Number) BGP Time To Live. Omit to use device defaults.

Read-Only:

- `batch_id` (String) Unique identifier for this CT Primitive Element's downstream collection
- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline

<a id="nestedatt--ip_links--bgp_peering_ip_endpoints--routing_policies"></a>
### Nested Schema for `ip_links.bgp_peering_ip_endpoints.routing_policies`

Required:

- `routing_policy_id` (String) Routing Policy ID to be applied

Read-Only:

- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline



<a id="nestedatt--ip_links--dynamic_bgp_peerings"></a>
### Nested Schema for `ip_links.dynamic_bgp_peerings`

Required:

- `bfd_enabled` (Boolean) Enable BFD.
- `ipv4_enabled` (Boolean) Enables peering with IPv4 neighbors.
- `ipv6_enabled` (Boolean) Enables peering with IPv6 neighbors.

Optional:

- `hold_time` (Number) BGP hold time (seconds).
- `ipv4_peer_prefix` (String) IPv4 Subnet for BGP Prefix Dynamic Neighbors. Leave blank to derive subnet from application point.
- `ipv6_peer_prefix` (String) IPv6 Subnet for BGP Prefix Dynamic Neighbors. Leave blank to derive subnet from application point.
- `keepalive_time` (Number) BGP keepalive time (seconds).
- `local_asn` (Number) This feature is configured on a per-peer basis. It allows a router to appear to be a member of a second autonomous system (AS) by prepending a local-as AS number, in addition to its real AS number, announced to its eBGP peer, resulting in an AS path length of two.
- `password` (String) Password used to secure the BGP session.
- `routing_policies` (Attributes Map) Map of Routing Policy Primitives to be used with this *Protocol Endpoint*. (see [below for nested schema](#nestedatt--ip_links--dynamic_bgp_peerings--routing_policies))
- `ttl` (Number) BGP Time To Live. Omit to use device defaults.

Read-Only:

- `batch_id` (String) Unique identifier for this CT Primitive Element's downstream collection
- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline

<a id="nestedatt--ip_links--dynamic_bgp_peerings--routing_policies"></a>
### Nested Schema for `ip_links.dynamic_bgp_peerings.routing_policies`

Required:

- `routing_policy_id` (String) Routing Policy ID to be applied

Read-Only:

- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline



<a id="nestedatt--ip_links--static_routes"></a>
### Nested Schema for `ip_links.static_routes`

Required:

- `network` (String) Destination network in CIDR notation
- `share_ip_endpoint` (Boolean) Indicates whether the next-hop IP address is shared across multiple remote systems. Default:  Default: `false`

Read-Only:

- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline



<a id="nestedatt--routing_zone_constraints"></a>
### Nested Schema for `routing_zone_constraints`

Required:

- `routing_zone_constraint_id` (String) Routing Zone Constraint ID to be applied

Read-Only:

- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline


<a id="nestedatt--virtual_network_multiples"></a>
### Nested Schema for `virtual_network_multiples`

Optional:

- `tagged_vn_ids` (Set of String) IDs of the Virtual Networks which should be tagged on the link
- `untagged_vn_id` (String) ID of the Virtual Network which should be untagged on the link

Read-Only:

- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline


<a id="nestedatt--virtual_network_singles"></a>
### Nested Schema for `virtual_network_singles`

Required:

- `tagged` (Boolean) Indicates whether the selected Virtual Network should be presented with an 802.1Q tag
- `virtual_network_id` (String) ID of the desired Virtual Network

Optional:

- `bgp_peering_generic_systems` (Attributes Map) Map of BGP Peering (Generic System) primitives (see [below for nested schema](#nestedatt--virtual_network_singles--bgp_peering_generic_systems))
- `static_routes` (Attributes Map) Map of Static Route primitives (see [below for nested schema](#nestedatt--virtual_network_singles--static_routes))

Read-Only:

- `batch_id` (String) Unique identifier for this CT Primitive Element's downstream collection
- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline

<a id="nestedatt--virtual_network_singles--bgp_peering_generic_systems"></a>
### Nested Schema for `virtual_network_singles.bgp_peering_generic_systems`

Required:

- `bfd_enabled` (Boolean) Enable BFD.
- `ipv4_addressing_type` (String) Must be one of: 
  - none
  - addressed
- `ipv6_addressing_type` (String) Must be one of: 
  - none
  - addressed
  - link_local
- `neighbor_asn_dynamic` (Boolean) When `true`, the BGP process will accept connections from any peer AS.
- `peer_from_loopback` (Boolean) Enable to peer from loopback interface. Default behavior peers from physical interface.
- `peer_to` (String) Must be one of: 
  - interface_or_ip_endpoint
  - interface_or_shared_ip_endpoint
  - loopback

Optional:

- `hold_time` (Number) BGP hold time (seconds).
- `keepalive_time` (Number) BGP keepalive time (seconds).
- `local_asn` (Number) This feature is configured on a per-peer basis. It allows a router to appear to be a member of a second autonomous system (AS) by prepending a local-as AS number, in addition to its real AS number, announced to its eBGP peer, resulting in an AS path length of two.
- `password` (String) Password used to secure the BGP session.
- `routing_policies` (Attributes Map) Map of Routing Policy Primitives to be used with this *Protocol Endpoint*. (see [below for nested schema](#nestedatt--virtual_network_singles--bgp_peering_generic_systems--routing_policies))
- `ttl` (Number) BGP Time To Live. Omit to use device defaults.

Read-Only:

- `batch_id` (String) Unique identifier for this CT Primitive Element's downstream collection
- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline

<a id="nestedatt--virtual_network_singles--bgp_peering_generic_systems--routing_policies"></a>
### Nested Schema for `virtual_network_singles.bgp_peering_generic_systems.routing_policies`

Required:

- `routing_policy_id` (String) Routing Policy ID to be applied

Read-Only:

- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline



<a id="nestedatt--virtual_network_singles--static_routes"></a>
### Nested Schema for `virtual_network_singles.static_routes`

Required:

- `network` (String) Destination network in CIDR notation
- `share_ip_endpoint` (Boolean) Indicates whether the next-hop IP address is shared across multiple remote systems. Default:  Default: `false`

Read-Only:

- `id` (String) Unique identifier for this CT Primitive element
- `pipeline_id` (String) Unique identifier for this CT Primitive Element's upstream pipeline



