---
page_title: "apstra_datacenter_generic_system Resource - terraform-provider-apstra"
subcategory: "Reference Design: Datacenter"
description: |-
  This resource creates a Generic System within a Datacenter Blueprint.
---

# apstra_datacenter_generic_system (Resource)

This resource creates a Generic System within a Datacenter Blueprint.


## Example Usage

```terraform
# This example uses the `apstra_datacenter_systems` data source and leaf
# switch tags to discover leaf switches in rack 11.
# It then provisions a 4x10G server with two 20G link aggregation groups

# We'll just pretend the blueprint ID is "abc"
locals {
  blueprint_id     = "abc"
  rack_11_leaf_ids = sort(tolist(data.apstra_datacenter_systems.rack_11_leafs.ids))
}

# The IDs field will include all systems matching the tag-based filter
data "apstra_datacenter_systems" "rack_11_leafs" {
  blueprint_id = local.blueprint_id
  filter = {
    tag_ids = ["leaf", "rack 11"]
  }
}

resource "apstra_datacenter_generic_system" "example" {
  blueprint_id      = local.blueprint_id
  name              = "Terraform Did This"
  hostname          = "terraformdidthis.example.com"
  tags              = ["terraform"]
  links = [
    {
      tags                          = ["10G", "terraform", "bond0"]
      lag_mode                      = "lacp_active"
      target_switch_id              = local.rack_11_leaf_ids[0] // first switch
      target_switch_if_name         = "xe-0/0/6"
      target_switch_if_transform_id = 1
      group_label                   = "bond0"
    },
    {
      tags                          = ["10G", "terraform", "bond0"]
      lag_mode                      = "lacp_active"
      target_switch_id              = local.rack_11_leaf_ids[1] // second switch
      target_switch_if_name         = "xe-0/0/6"
      target_switch_if_transform_id = 1
      group_label                   = "bond0"
    },
    {
      tags                          = ["10G", "terraform", "bond1"]
      lag_mode                      = "lacp_active"
      target_switch_id              = local.rack_11_leaf_ids[0] // first switch
      target_switch_if_name         = "xe-0/0/7"
      target_switch_if_transform_id = 1
      group_label                   = "bond1"
    },
    {
      tags                          = ["10G", "terraform", "bond1"]
      lag_mode                      = "lacp_active"
      target_switch_id              = local.rack_11_leaf_ids[1] // second switch
      target_switch_if_name         = "xe-0/0/7"
      target_switch_if_transform_id = 1
      group_label                   = "bond1"
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `blueprint_id` (String) Apstra Blueprint ID.
- `links` (Attributes Set) Generic System link details. (see [below for nested schema](#nestedatt--links))

### Optional

- `asn` (Number) AS number of the Generic System. Note that in some circumstances Apstra may assign an ASN to the generic system even when none is supplied via this attribute. The automaticallyassigned value will be overwritten by Terraform during a subsequent apply operation.
- `clear_cts_on_destroy` (Boolean) When `true`, Connectivity Templates associated with this Generic System will be automatically cleared in a variety of circumstances where they would ordinarily block Generic System changes, including:
  - Deletion of the Generic System
  - Deletion of a Generic System Link or LAG interface
  - Orphaning a LAG interface by reassigning all of its member links to new roles by changing their `group_label` attribute
- `deploy_mode` (String) Set the Apstra Deploy Mode for this Generic System. Default: `deploy`
- `external` (Boolean) Set `true` to create an External Generic System
- `hostname` (String) System hostname.
- `loopback_ipv4` (String) IPv4 address of loopback interface in CIDR notation
- `loopback_ipv6` (String) IPv6 address of loopback interface in CIDR notation
- `name` (String) Name displayed in the Apstra web UI.
- `port_channel_id_max` (Number) Omit this attribute to allow any available port-channel to be used.
- `port_channel_id_min` (Number) Omit this attribute to allow any available port-channel to be used.
- `tags` (Set of String) Tag labels to be applied to this Generic System. If a Tag doesn't exist in the Blueprint it will be created automatically.

### Read-Only

- `id` (String) Apstra graph node ID.
- `link_application_point_ids_by_group_label` (Map of String) Map of application point ids keyed by `group_label`. The value at each key is a string representing the physical or logical (for LAG interfaces) switch port where the server is connected.
- `link_application_point_ids_by_tag` (Map of Set of String) Map of application point ids keyed by `tag`. The value at each key is a set of strings representing the physical or logical (for LAG interfaces) switch ports where server links tagged with the map key are connected.

<a id="nestedatt--links"></a>
### Nested Schema for `links`

Required:

- `target_switch_id` (String) Graph Node ID of the Leaf Switch or Access Switch where the link connects.
- `target_switch_if_name` (String) Name of the physical interface where the link connects on the Leaf Switch or Access Switch ("ge-0/0/1" or similar).
- `target_switch_if_transform_id` (Number) Transformation ID sets the operational mode of an interface.

Optional:

- `group_label` (String) This field is used to collect multiple links into aggregation groups. For example, to create two LAG pairs from four physical links, you might use `group_label` value "bond0" on two links and "bond1" on the other two links. Apstra assigns a unique group ID to each link by default.
- `lag_mode` (String) LAG negotiation mode of the Link. All links with the same `group_label` must use the value.
- `tags` (Set of String) Names of Tag to be applied to this Link. If a Tag doesn't exist in the Blueprint it will be created automatically.



