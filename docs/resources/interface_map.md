---
page_title: "apstra_interface_map Resource - terraform-provider-apstra"
subcategory: ""
description: |-
  This resource creates an Interface Map
---

# apstra_interface_map (Resource)

This resource creates an Interface Map

## Example Usage

```terraform
locals {
  if_map = [
    { // map ld 1/1 - 1/2 to et-0/0/48 - et-0/0/49
      ld_prefix = "1/"
      ld_first_port = 1
      phy_prefix = "et-0/0/"
      phy_first_port = 48
      count = 2
      transform_id = 3
    },
    { // map ld 1/3 - 1/4 to et-0/0/50 - et-0/0/50
      ld_prefix = "1/"
      ld_first_port = 3
      phy_prefix = "et-0/0/"
      phy_first_port = 52
      count = 2
      transform_id = 3
    },
    { // map ld 2/1 - 2/8 to xe-0/0/0 - xe-0/0/7
      ld_prefix = "2/"
      ld_first_port = 1
      phy_prefix = "xe-0/0/"
      phy_first_port = 10
      count = 8
      transform_id = 1
    },
  ]
}

resource "apstra_interface_map" "if_map" {
  name = "aaa tf_map2"
  logical_device_id = "AOS-4x40_8x10-1"
  device_profile_id = "Juniper_QFX5120-48T_Junos"
  interfaces = flatten([
    for map in local.if_map: [
      for i in range(map.count): {
        logical_device_port = format("%s%d", map.ld_prefix, map.ld_first_port + i)
        physical_interface_name = format("%s%d", map.phy_prefix, map.phy_first_port + i)
        transform_id = map.transform_id
      }
    ]
  ])
#  interfaces = [
#    {
#      "logical_device_port" = "1/1"
#      "physical_interface_name" = "et-0/0/48"
#    },
#    {
#      "logical_device_port" = "1/2"
#      "physical_interface_name" = "et-0/0/49"
#    },
#    {
#      "logical_device_port" = "1/3"
#      "physical_interface_name" = "et-0/0/52"
#    },
#    {
#      "logical_device_port" = "1/4"
#      "physical_interface_name" = "et-0/0/53"
#    },
#    {
#      "logical_device_port" = "2/1"
#      "physical_interface_name" = "xe-0/0/0"
#    },
#    {
#      "logical_device_port" = "2/2"
#      "physical_interface_name" = "xe-0/0/1"
#    },
#    {
#      "logical_device_port" = "2/3"
#      "physical_interface_name" = "xe-0/0/2"
#    },
#    {
#      "logical_device_port" = "2/4"
#      "physical_interface_name" = "xe-0/0/3"
#    },
#    {
#      "logical_device_port" = "2/5"
#      "physical_interface_name" = "xe-0/0/4"
#    },
#    {
#      "logical_device_port" = "2/6"
#      "physical_interface_name" = "xe-0/0/5"
#    },
#    {
#      "logical_device_port" = "2/7"
#      "physical_interface_name" = "xe-0/0/6"
#    },
#    {
#      "logical_device_port" = "2/8"
#      "physical_interface_name" = "xe-0/0/7"
#    },
#  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `device_profile_id` (String) ID of Device Profile to be mapped.
- `interfaces` (Attributes List) Ordered list of interface mapping info. (see [below for nested schema](#nestedatt--interfaces))
- `logical_device_id` (String) ID of Logical Device to be mapped.
- `name` (String) Interface Map name as displayed in the web UI

### Read-Only

- `id` (String) Apstra ID number of the Interface Map
- `unused_interfaces` (Attributes List) Ordered list of interface mapping info for unused interfaces. (see [below for nested schema](#nestedatt--unused_interfaces))

<a id="nestedatt--interfaces"></a>
### Nested Schema for `interfaces`

Required:

- `logical_device_port` (String) Panel and Port number of logical device expressed in the form "<panel>/<port>". Both numbers are 1-indexed, so the 2nd port on the 1st panel would be "1/2".
- `physical_interface_name` (String) Interface name found in the Device Profile, e.g. "et-0/0/1:2"

Optional:

- `transformation_id` (Number) Transformation ID number identifying the desired port behavior, as found in the Device Profile. Required only when multiple transformation candidates are found for a given physical_interface_name and speed (as determined by the Logical Device and logical_device_port.


<a id="nestedatt--unused_interfaces"></a>
### Nested Schema for `unused_interfaces`

Read-Only:

- `logical_device_port` (String) Panel and Port number of logical device expressed in the form "<panel>/<port>". Both numbers are 1-indexed, so the 2nd port on the 1st panel would be "1/2".
- `physical_interface_name` (String) Interface name found in the Device Profile, e.g. "et-0/0/1:2"
- `transformation_id` (Number) Transformation ID number identifying the desired port behavior, as found in the Device Profile.
