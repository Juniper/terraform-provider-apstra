---
page_title: "Provider: Apstra"
description: |-
  The Apstra Provider allows Terraform to manage Juniper Apstra fabrics.
---

# Apstra Provider

The Apstra Provider allows Terraform to manage Juniper Apstra fabrics.

It covers day 0 and day 1 operations (design and deployment), and a growing list of day 2 capabilities within *Datacenter* and *Freeform* Apstra reference designs Blueprints.

Use the navigation tree on the left to read about the available resources and data sources.

This release has been tested with Apstra versions 4.2.0, 4.2.1, 4.2.1.1, 4.2.2, 5.0.0, and 5.0.1.

Some example projects which make use of this provider can be found [here](https://github.com/Juniper/terraform-apstra-examples).

## Configuration

### Provider configuration stanza

```terraform
provider "apstra" {
  url                     = "https://apstra.example.com" # required
  tls_validation_disabled = true                         # optional
  blueprint_mutex_enabled = false                        # optional
  api_timeout             = 0                            # optional; 0 == infinite
}
```

### Credentials

Users are encouraged to pass username and password via the `APSTRA_USER` and
`APSTRA_PASS` environment variables. These credentials may also be set by
embedding them in the URL string using
[standard syntax](https://datatracker.ietf.org/doc/html/rfc1738#section-3.1).
Please consider whether writing credentials to a configuration file is
acceptable in your environment.

### Proxy Support

HTTP, HTTPS, and SOCKS5 proxies are supported through the `HTTP_PROXY` and
`HTTPS_PROXY` environment variables or the lowercase versions of those
variables. The value of each may be either a complete URL or a "host[:port]",
in which case the "http" scheme is assumed.

Hosts which should be omitted from the proxy configuration may be listed in
the `NO_PROXY` (or `no_proxy`) environment variable ([details](https://github.com/golang/go/blob/682a1d2176b02337460aeede0ff9e49429525195/src/vendor/golang.org/x/net/http/httpproxy/proxy.go#L38C1-L50C13)).

### Additional Environment Variables

Provider attributes which have been omitted from the configuration
may be set via environment variables: `APSTRA_API_TIMEOUT`,
`APSTRA_BLUEPRINT_MUTEX_ENABLED`, `APSTRA_BLUEPRINT_MUTEX_MESSAGE`,
`APSTRA_EXPERIMENTAL`, `APSTRA_TLS_VALIDATION_DISABLED`, and `APSTRA_URL`.

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `api_timeout` (Number) Timeout in seconds for completing API transactions with the Apstra server. Omit for default value of 10 seconds. Value of 0 results in infinite timeout.
- `blueprint_mutex_enabled` (Boolean) Blueprint mutexes are indicators that changes are being made in a staging Blueprint and other automation processes (including other instances of Terraform) should wait before beginning to make changes of their own. Setting this attribute 'true' causes the provider to lock a blueprint-specific mutex before making any changes. [More info here](https://github.com/Juniper/terraform-provider-apstra/blob/main/kb/blueprint_mutex.md).
- `blueprint_mutex_message` (String) Blueprint mutexes are signals that changes are being made in a staging Blueprint and other automation processes (including other instances of Terraform) should wait before beginning to make changes of their own. The mutexes embed a human-readable field to reduce confusion in the event a mutex needs to be cleared manually. This attribute overrides the default message in that field: "locked by terraform at $DATE".
- `env_var_prefix` (String) This attribute defines a prefix which redefines all of the `APSTRA_*` environment variables. For example, setting `env_var_prefix = "FOO_"` will cause the provider to learn the Apstra service URL from the `FOO_APSTRA_URL` environment variable rather than the `APSTRA_URL` environment variable. This capability is intended to be used when configuring multiple instances of the Apstra provider (which talk to multiple Apstra servers) in a single Terraform project.
- `experimental` (Boolean) Enable *experimental* features. In this release that means:
  - Set the `experimental` flag in the underlying Apstra SDK client object. Doing so permits connections to Apstra instances not supported by the SDK.
- `tls_validation_disabled` (Boolean) Set 'true' to disable TLS certificate validation.
- `url` (String) URL of the apstra server, e.g. `https://apstra.example.com`
 It is possible to include Apstra API credentials in the URL using [standard syntax](https://datatracker.ietf.org/doc/html/rfc1738#section-3.1). Care should be taken to ensure that these credentials aren't accidentally committed to version control, etc... The preferred approach is to pass the credentials as environment variables `APSTRA_USER`  and `APSTRA_PASS`.
 If `url` is omitted, environment variable `APSTRA_URL` can be used to in its place.
 When the username or password are embedded in the URL string, any special characters must be URL-encoded. For example, `pass^word` would become `pass%5eword`.
