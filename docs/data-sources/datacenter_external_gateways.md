---
page_title: "apstra_datacenter_external_gateways Data Source - terraform-provider-apstra"
subcategory: "Reference Design: Datacenter"
description: |-
  This data source returns Graph DB node IDs of DCI External Gateways within a Blueprint.
  Optional filters can be used to select only interesting External Gateways.
---

# apstra_datacenter_external_gateways (Data Source)

This data source returns Graph DB node IDs of DCI External Gateways within a Blueprint.

Optional `filters` can be used to select only interesting External Gateways.


## Example Usage

```terraform
# This example collects the IDs of external gateways configured on all leaf
# switches, and external gateways configured on spine switches which share
# all route types.

// find leaf switch IDs
data "apstra_datacenter_systems" "leaf_switches" {
  blueprint_id = "007723b7-a387-4bb3-8a5e-b5e9f265de0d"
  filters = [
    { system_type = "switch", role = "leaf" },
  ]
}

// find spine switch IDs
data "apstra_datacenter_systems" "spine_switches" {
  blueprint_id = "007723b7-a387-4bb3-8a5e-b5e9f265de0d"
  filters = [
    { system_type = "switch", role = "spine" },
  ]
}

// find interesting external gateway IDs
data "apstra_datacenter_external_gateways" "leaf_peers_and_spine_peers_with_all_routes" {
  blueprint_id = "007723b7-a387-4bb3-8a5e-b5e9f265de0d"
  filters = [
    {
      local_gateway_nodes = data.apstra_datacenter_systems.leaf_switches.ids
    },
    {
      local_gateway_nodes = data.apstra_datacenter_systems.spine_switches.ids
      evpn_route_types    = "all"
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `blueprint_id` (String) Apstra Blueprint to search.

### Optional

- `filters` (Attributes List) List of filters used to select only desired External Gateways. To match a filter, all specified attributes must match (each attribute within a filter is AND-ed together). The returned IDs represent the gateways matched by all of the filters together (filters are OR-ed together). (see [below for nested schema](#nestedatt--filters))

### Read-Only

- `ids` (Set of String) IDs of matching `routing_policy` Graph DB nodes.

<a id="nestedatt--filters"></a>
### Nested Schema for `filters`

Optional:

- `asn` (Number) External Gateway AS Number
- `evpn_route_types` (String) EVPN route types. Valid values are: ["all", "type5_only"]. Default: "all"
- `hold_time` (Number) BGP hold time (seconds).
- `id` (String) Apstra Object ID.
- `ip_address` (String) External Gateway IP address
- `keepalive_time` (Number) BGP keepalive time (seconds).
- `local_gateway_nodes` (Set of String) Set of IDs of switch nodes which will be configured to peer with the External Gateway
- `name` (String) External Gateway name
- `password` (String, Sensitive) BGP TCP authentication password
- `ttl` (Number) BGP Time To Live. Omit to use device defaults.

Read-Only:

- `blueprint_id` (String) Not applicable in filter context. Ignore.
