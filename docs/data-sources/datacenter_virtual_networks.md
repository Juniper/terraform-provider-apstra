---
page_title: "apstra_datacenter_virtual_networks Data Source - terraform-provider-apstra"
subcategory: "Reference Design: Datacenter"
description: |-
  This data source returns the IDs of Virtual Networks within the specified Blueprint. All of the filter attributes are optional.
---

# apstra_datacenter_virtual_networks (Data Source)

This data source returns the IDs of Virtual Networks within the specified Blueprint. All of the `filter` attributes are optional.


## Example Usage

```terraform
# Without specifying no filter, a wide search is performed. The ID of all
# routing zones in the blueprint will be returned in the `ids` attribute..
data "apstra_datacenter_virtual_networks" "all" {
  blueprint_id = "05f9d3fc-671a-4efc-8e91-5ef87b2937d3"
}

# This example performs a narrow search. It will construct and
# and execute the following graph query:
# match(
#   node(type='virtual_network', name='n_virtual_network', reserved_vlan_id=is_none()),
#   node(type='virtual_network', name='n_virtual_network')
#     .in_(type='member_vns')
#     .node(type='security_zone', id='Zplm0niOFCCCfjaXkXo'),
#   node(type='virtual_network', name='n_virtual_network')
#     .out(type='instantiated_by')
#     .node(type='vn_instance', dhcp_enabled=True)
# )
data "apstra_datacenter_virtual_networks" "prod_unreserved_with_dhcp" {
  blueprint_id = "b726704d-f80e-4733-9103-abd6ccd8752c"
  filters = [
    {
      reserve_vlan         = false
      dhcp_service_enabled = true
      routing_zone_id      = "Zplm0niOFCCCfjaXkXo"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `blueprint_id` (String) Apstra Blueprint ID.

### Optional

- `filter` (Attributes, Deprecated) Virtual Network attributes used as filter. At least one filter attribute must be included when this attribute is used. (see [below for nested schema](#nestedatt--filter))
- `filters` (Attributes List) List of filters used to select only desired node IDs. For a node to match a filter, all specified attributes must match (each attribute within a filter is AND-ed together). The returned node IDs represent the nodes matched by all of the filters together (filters are OR-ed together). (see [below for nested schema](#nestedatt--filters))

### Read-Only

- `graph_queries` (List of String) List of graph datastore queries derived from `filters` used to perform the lookup. Note that the `ipv6_subnet` and `ipv6_gateway` attributes are never part of the graph query because IPv6 zero compression rules make string matches unreliable.
- `ids` (Set of String) Set of Virtual Network IDs

<a id="nestedatt--filter"></a>
### Nested Schema for `filter`

Optional:

- `description` (String) Virtual Network Description
- `dhcp_service_enabled` (Boolean) Enables a DHCP relay agent.
- `export_route_targets` (Set of String) This is a set of *required* export RTs, not an exact-match list.
- `import_route_targets` (Set of String) This is a set of *required* import RTs, not an exact-match list.
- `ipv4_connectivity_enabled` (Boolean) Enables IPv4 within the Virtual Network.
- `ipv4_subnet` (String) IPv4 subnet associated with the Virtual Network.
- `ipv4_virtual_gateway` (String) Specifies the IPv4 virtual gateway address within the Virtual Network.
- `ipv4_virtual_gateway_enabled` (Boolean) Controls and indicates whether the IPv4 gateway within the Virtual Network is enabled.
- `ipv6_connectivity_enabled` (Boolean) Enables IPv6 within the Virtual Network.
- `ipv6_subnet` (String) IPv6 subnet associated with the Virtual Network. Note that this attribute will not appear in the `graph_query` output because IPv6 zero compression rules are problematic for mechanisms which rely on string matching.
- `ipv6_virtual_gateway` (String) Specifies the IPv6 virtual gateway address within the Virtual Network. Note that this attribute will not appear in the `graph_query` output because IPv6 zero compression rules are problematic for mechanisms which rely on string matching.
- `ipv6_virtual_gateway_enabled` (Boolean) Controls and indicates whether the IPv6 gateway within the Virtual Network is enabled.
- `l3_mtu` (Number) L3 MTU used by the L3 switch interfaces participating in the Virtual Network. Requires Apstra 4.2 or later.
- `name` (String) Virtual Network Name
- `reserve_vlan` (Boolean) For use only with `vxlan` type Virtual networks when all `bindings` use the same VLAN ID. This option reserves the VLAN fabric-wide, even on switches to which the Virtual Network has not yet been deployed.
- `routing_zone_id` (String) Routing Zone ID (required when `type == vxlan`)
- `type` (String) Virtual Network Type
- `vni` (Number) EVPN Virtual Network ID to be associated with this Virtual Network.

Read-Only:

- `bindings` (Attributes Map) Not applicable in filter context. Ignore. (see [below for nested schema](#nestedatt--filter--bindings))
- `blueprint_id` (String) Not applicable in filter context. Ignore.
- `had_prior_vni_config` (Boolean) Not applicable in filter context. Ignore.
- `id` (String) Not applicable in filter context. Ignore.

<a id="nestedatt--filter--bindings"></a>
### Nested Schema for `filter.bindings`



<a id="nestedatt--filters"></a>
### Nested Schema for `filters`

Optional:

- `description` (String) Virtual Network Description
- `dhcp_service_enabled` (Boolean) Enables a DHCP relay agent.
- `export_route_targets` (Set of String) This is a set of *required* export RTs, not an exact-match list.
- `import_route_targets` (Set of String) This is a set of *required* import RTs, not an exact-match list.
- `ipv4_connectivity_enabled` (Boolean) Enables IPv4 within the Virtual Network.
- `ipv4_subnet` (String) IPv4 subnet associated with the Virtual Network.
- `ipv4_virtual_gateway` (String) Specifies the IPv4 virtual gateway address within the Virtual Network.
- `ipv4_virtual_gateway_enabled` (Boolean) Controls and indicates whether the IPv4 gateway within the Virtual Network is enabled.
- `ipv6_connectivity_enabled` (Boolean) Enables IPv6 within the Virtual Network.
- `ipv6_subnet` (String) IPv6 subnet associated with the Virtual Network. Note that this attribute will not appear in the `graph_query` output because IPv6 zero compression rules are problematic for mechanisms which rely on string matching.
- `ipv6_virtual_gateway` (String) Specifies the IPv6 virtual gateway address within the Virtual Network. Note that this attribute will not appear in the `graph_query` output because IPv6 zero compression rules are problematic for mechanisms which rely on string matching.
- `ipv6_virtual_gateway_enabled` (Boolean) Controls and indicates whether the IPv6 gateway within the Virtual Network is enabled.
- `l3_mtu` (Number) L3 MTU used by the L3 switch interfaces participating in the Virtual Network. Requires Apstra 4.2 or later.
- `name` (String) Virtual Network Name
- `reserve_vlan` (Boolean) For use only with `vxlan` type Virtual networks when all `bindings` use the same VLAN ID. This option reserves the VLAN fabric-wide, even on switches to which the Virtual Network has not yet been deployed.
- `routing_zone_id` (String) Routing Zone ID (required when `type == vxlan`)
- `type` (String) Virtual Network Type
- `vni` (Number) EVPN Virtual Network ID to be associated with this Virtual Network.

Read-Only:

- `bindings` (Attributes Map) Not applicable in filter context. Ignore. (see [below for nested schema](#nestedatt--filters--bindings))
- `blueprint_id` (String) Not applicable in filter context. Ignore.
- `had_prior_vni_config` (Boolean) Not applicable in filter context. Ignore.
- `id` (String) Not applicable in filter context. Ignore.

<a id="nestedatt--filters--bindings"></a>
### Nested Schema for `filters.bindings`
